<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./CSS/Principal.css">
    <link rel="stylesheet" href="./CSS/DetalleProductos.css">
    <title>Inicio</title>
</head>
<body>
    <!-- Navegador -->
    <nav class="navbar navbar-expand-lg bg-dark" data-bs-theme="dark">
      <div class="container-fluid" id="navegador">
        <a class="navbar-brand" href="#"><h3>ESTUDIO MAGIAS</h3></a>
        <ul class="nav justify-content-end">
          <li class="nav-item">
            <a class="nav-link active" href="./index.html">Inicio </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./ProductosServicios.html">Productos y Servicios</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./ProcesoCompra.html">Proceso de Compra</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./Contacto.html">Contacto</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./PreguntasFrecuentes.html">Preguntas Frecuentes</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./AcercaDe.html">Acerca De</a>
          </li>
        </ul>
      </div>
    </nav>
    <!-- Fin  Navegador -->
    <main>
      <div class="container-fluid p-3">
        <!-- Imagen principal -->
        <div class="row">
          <div class="col-4">
            <img id="Imagen" class="card-img-top detalle" style="max-height:460px;" role="img" src="./Imagenes/NoEncontrado.avif"
              alt="Imagen"/>
          </div>
          <!-- Card del producto -->
          <div class="col-8">
            <ul class="list-group detalle">
              <li class="list-group-item nombreProducto">
                <h2 id="Nombre" class="card-title">Nombre producto</h2>
              </li>
              <li class="list-group-item">
                <p id="Descripcion" class="card-text">Descripción:</p>
              </li>
              <li class="list-group-item">
                <p id="Precio" class="card-text">Precio:</p>
              </li>
              <li class="list-group-item">
                <p id="TiempoEntrega" class="card-text">Tiempo de entrega:</p>
              </li>
              <li class="list-group-item">
                <p id="CostoEnvio" class="card-text">Costo del envío:</p>
              </li>
              <li class="list-group-item">
                <p id="Stock" class="card-text">Stock:</p>
              </li>
              <li class="list-group-item">
                <p id="OpcionesEntrega" class="card-text">Opciones de entrega:</p>
              </li>
              <li class="list-group-item">
                <p id="Garantia" class="card-text">Garantía:</p>
              </li>
              <li class="list-group-item">
                <p id="Categorias" class="card-text">Categorías:</p>
              </li>
              <li class="list-group-item">
                <button type="button" class="btn btn-dark btnCompra"><a href="./ProcesoCompra.html">Añadir al carrito</a></button>
              </li>
            </ul>
          </div>
          <!-- Galería de imágenes -->
          <div class="row galeria">
            <div class="col-4 colImagen">
              <img id="Imagen1" class="card-img-top detalle imagenGaleria" style="max-height:460px;" role="img" src="./Imagenes/NoEncontrado.avif" alt="Imagen1">
            </div>
            <div class="col-4 colImagen">
              <img id="Imagen2" class="card-img-top detalle imagenGaleria" style="max-height:460px;" role="img" src="./Imagenes/NoEncontrado.avif" alt="Imagen2">
            </div>
            <div class="col-4 colImagen">
              <img id="Imagen3" class="card-img-top detalle imagenGaleria" style="max-height:460px;" role="img" src="./Imagenes/NoEncontrado.avif" alt="Imagen3">
            </div>
          </div>
          <!-- Reseñas -->
          <h2>Selecciona tu calificación:</h2>
          <div id="stars">
              <span class="star" data-value="1">&#9733;</span>
              <span class="star" data-value="2">&#9733;</span>
              <span class="star" data-value="3">&#9733;</span>
              <span class="star" data-value="4">&#9733;</span>
              <span class="star" data-value="5">&#9733;</span>
          </div>
      
          <div class="comment-box">
              <textarea id="userComment" rows="4" cols="50" placeholder="Deja un comentario (opcional)"></textarea>
              <br>
              <button id="saveRating" disabled>Guardar Calificación y Comentario</button>
              <button id="cancelRating" disabled>Cancelar</button>
              <p id="feedback" class="feedback"></p>
          </div>
      
          <h3>Calificaciones y Comentarios Anteriores:</h3>
          <div id="savedRatings"></div>
      
          <button id="clearRatings">Limpiar Todas las Calificaciones</button>
          
          <!-- Fin reseñas -->
          <div class="row link">
            <h2><a href="./Devolucion.html">Cambios y Devoluciones</a></h2>
            <h2><a href="./Contacto.html">Contacto y ayuda</a></h2>
          </div>
        </div>
      </div>
  </main>


    <!-- Footer inicio -->
  <footer>      
    <div class="container-fluid">
      <footer>      
        <div class="container-fluid">
    <h4>Contáctenos</h4>
          <a href="https://www.facebook.com/osvaldoquesadafotografo?mibextid=ZbWKwL"><img src="./Imagenes/social_facebook.png" alt="instagram" style="width: 5%;">
    </a>
    <a href="https://wa.me/qr/DXZ2EVTI2BHXD1 "><img src="./Imagenes/whatsapp_icon.png" alt="instagram" style="width: 5%;">
    </a>
        </div>   
         <hr>
        <div class="container-fluid">
          <h6>© 2024, Derechos Reservados por: </h6>
          <small>
            <b>Ariana Morera Castro y Sebastián Torrellas Valera</b>
          </small>
        </div>
      </footer>
    <!-- Footer fin -->
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script src="./Json/Productos.js"></script>
    <script src="./Js/DetalleProductos.js"></script>
    <script>
      const stars = document.querySelectorAll('.star');
      const savedRatings = JSON.parse(localStorage.getItem('userRatings')) || [];
      const feedback = document.getElementById('feedback');
      const saveButton = document.getElementById('saveRating');
      let selectedRating = 0;

      // Mostrar calificaciones y comentarios guardados
      displaySavedRatings();

      resetStars();

      // Si hay una calificación guardada recientemente, la mostramos
      if (savedRatings.length > 0) {
          const lastRating = savedRatings[savedRatings.length - 1];
          selectedRating = lastRating.rating; // Asegúrate de que selectedRating esté actualizado
          setRating(selectedRating);
      }

      // Asignamos el evento de clic a cada estrella
      stars.forEach(star => {
          star.addEventListener('click', function() {
              selectedRating = this.getAttribute('data-value');
              setRating(selectedRating);
              saveButton.disabled = false; // Habilitar el botón cuando se selecciona una calificación
              cancel
            });

          star.addEventListener('mouseover', function() {
              const rating = this.getAttribute('data-value');
              highlightStars(rating);
          });

          star.addEventListener('mouseout', function() {
              highlightStars(selectedRating);
          });
      });

      // Guardar la calificación y comentario al hacer clic en el botón
      saveButton.addEventListener('click', function() {
          const comment = document.getElementById('userComment').value;
          savedRatings.push({ rating: selectedRating, comment: comment });
          localStorage.setItem('userRatings', JSON.stringify(savedRatings));
          displaySavedRatings();
          document.getElementById('userComment').value = ''; // Limpiar el comentario después de guardar
          saveButton.disabled = true; // Deshabilitar el botón después de guardar
          // Restaurar el color de las estrellas a gris
          resetStars();
      });

      // Función para mostrar las estrellas seleccionadas
      function setRating(rating) {
          stars.forEach(star => {
              if (parseInt(star.getAttribute('data-value')) <= rating) {
                  star.classList.add('selected');
              } else {
                  star.classList.remove('selected');
              }
          });
      }

      // Función para resaltar estrellas al pasar el mouse
      function highlightStars(rating) {
          stars.forEach(star => {
              if (parseInt(star.getAttribute('data-value')) <= rating) {
                  star.classList.add('hover');
              } else {
                  star.classList.remove('hover');
              }
          });
      }

      // Función para restaurar las estrellas a su color original
      function resetStars() {
          stars.forEach(star => {
              star.classList.remove('selected');
              star.classList.remove('hover');
              
          });
      }

      // Función para mostrar calificaciones y comentarios guardados
      function displaySavedRatings() {
          const savedRatingsDiv = document.getElementById('savedRatings');
          savedRatingsDiv.innerHTML = ''; // Limpiar contenido previo
          savedRatings.forEach((entry, index) => {
              const ratingDiv = document.createElement('div');
              const starsDisplay = '★'.repeat(entry.rating) + '☆'.repeat(5 - entry.rating);
              const comment = entry.comment ? `Comentario: ${entry.comment}` : 'Sin comentario';
              ratingDiv.textContent = `Calificación ${index + 1}: ${starsDisplay} - ${comment}`;
              savedRatingsDiv.appendChild(ratingDiv);
          });
      }

      // Limpiar todas las calificaciones y comentarios
      document.getElementById('clearRatings').addEventListener('click', function() {
          localStorage.removeItem('userRatings');
          savedRatings.length = 0; // Limpiar el array en memoria
          displaySavedRatings();
          // feedback.textContent = 'Todas las calificaciones han sido eliminadas.';
          
      });
  </script>

  </body>
</html>
